<!DOCTYPE HTML>
<!--
	Striped by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>

<head>
	<title>PiKesi's Home on the Internet</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<link rel="stylesheet" href="assets/css/main.css" />

</head>

<body class="is-preload">

	<!-- Content -->
	<div id="content">
		<div class="inner">

		</div>
	</div>

	<!-- Sidebar -->
	<div id="sidebar">
		<script>
			fetch('sidebar.html')
				.then(response => response.text())
				.then(data => {
					// 获取文本字符串中的每一行
					const lines = data.split('\n');
					// 修改第三行
					lines[13] = "        <li class='current'><a href='/life.html'>Records & Thoughts</a></li>\n";
					// 将修改后的文本字符串重新加载到myDiv元素中
					document.getElementById('sidebar').innerHTML = lines.join('');
				});
		</script>
	</div>

	<!-- Scripts -->
	<script src="assets/js/jquery.min.js"></script>
	<script src="assets/js/browser.min.js"></script>
	<script src="assets/js/breakpoints.min.js"></script>
	<script src="assets/js/util.js"></script>
	<script src="assets/js/main.js"></script>

	<script>
		const articleList = [
			//  落幕
			{
				name: "落幕",
				title: "Say Goodbye",
				filename: "RDRII",
				year: 2023,
				month: "Mar",
				day: 3,
				content: "但我想，唯独关于后悔，我想是不后悔，那段时光那么美好， 每天都有新的想法新的期待冒出来，下午两点醒来，舍友都去上课， 阳光从窗帘的缝隙射进来，一寝室外卖垃圾灰尘无所遁形，打游戏打到早上五点， 即便如此我依然觉得未来可期 再来一次，我还是会选择挥霍大把的时光"
			},
			// 猫与皮套人
			{
				name: "猫与皮套人",
				title: "Cats",
				filename: "2022Birthday",
				year: 2022,
				month: "May",
				day: 22,
				content: "猫和皮套人是那么的相像，脱离了人，他们都无法生存，必须依靠着人才能存在， 这也意味着他们的生命是依赖于人的施舍，终其一生只能依赖于人的恩赐。 而如果身为人存活也是依靠他人，那倒不如退化成猫与皮套人反而更能惹人欢心。"
			},
			// 黑暗之魂
			{
				name: "黑暗之魂与宫崎英高的世界",
				title: "A Living World, a dying world",
				filename: "DarkSouls",
				year: 2022,
				month: "Apr",
				day: 29,
				content: '"But then there was Fire. And with Fire, came Disparity. Heat and cold, life and death, and of course... Light and Dark. Then, from the Dark, They came, and found the Souls of Lords within the flame."'
			},
			// 死亡搁浅
			{
				name: "《死亡搁浅》的游戏体验",
				title: "Connect the world",
				filename: "DeathStranding",
				year: 2021,
				month: "Dec",
				day: 20,
				content: "文章内容……"
			},
			// 西方马克思
			{
				name: "西方马克思与法兰克福学派",
				title: "Western Maxism",
				filename: "WesternMaxism",
				year: 2021,
				month: "Jun",
				day: 18,
				content: "文章内容……"
			},
			// 超人
			{
				name: "从超人审视个人英雄主义",
				title: "Super Man or Super Hero",
				filename: "Superman",
				year: 2020,
				month: "Dec",
				day: 24,
				content: "文章内容……"
			},
		];

		const URLList = ['name', 'title', 'filename'];

		function encodeURLParams(params) {
			let encodedParams = "";
			for (let key in params) {
				if (params.hasOwnProperty(key) && URLList.includes(key)) {
					encodedParams += `${encodeURIComponent(key)}=${encodeURIComponent(params[key])}&`;
				}
			}
			return encodedParams.slice(0, -1); // 去除最后一个 '&'
		}

		function renderArticle(article) {
			return new Promise((resolve, reject) => {
				const articleElement = $("<article></article>").addClass("box post post-excerpt");
				const headerElement = $("<header></header>");
				const h2Element = $("<h2></h2>").append($("<a></a>").attr("href", "/markdown/main.html?" + encodeURLParams(article)).text(article.name));
				const pElement = $("<p></p>").text(article.title);
				const infoElement = $("<div></div>").addClass("info");
				const dateElement = $("<span></span>").addClass("date");
				const yearElement = $("<span></span>").addClass("year").text(article.year);
				const monthElement = $("<span></span>").addClass("month").text(article.month);
				const dayElement = $("<span></span>").addClass("day").text(article.day);
				const featuredImageElement = $("<a></a>").attr("href", "/markdown/main.html?" + encodeURLParams(article)).addClass("image featured").append($("<img/>").attr("src", `markdown/${article.filename}/head.jpg`).attr("alt", ""));
				const contentElement = $("<div></div>").css("text-indent", "2em").html(article.content);

				dateElement.append(monthElement).append(dayElement).append(yearElement);
				infoElement.append(dateElement);

				headerElement.append(h2Element).append(pElement);
				articleElement.append(headerElement).append(infoElement).append(featuredImageElement).append(contentElement);

				resolve(articleElement);
			});
		}

		const articlePromises = articleList.map((article) => renderArticle(article));
		Promise.all(articlePromises)
			.then((articles) => {
				articles.forEach((article) => {
					$("#content .inner").append(article);
				});
				console.log("All articles have been rendered!");
			})
			.catch((error) => {
				console.error("Error rendering articles:", error);
			});

	</script>

</body>

</html>